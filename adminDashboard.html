<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js"></script>
  <script src="firebase.js"></script>
</head>
<body>
  <div class="container">
    <h2>Welcome Admin</h2>
    <input type="text" id="targetUID" placeholder="Student UID" />
    <input type="text" id="month" placeholder="Month (e.g. Jan)" />
    <input type="number" id="amount" placeholder="Amount" />
    <button onclick="updateFee()">Update Fee</button>
    <br><br>
    <input type="text" id="subject" placeholder="Subject" />
    <input type="number" id="marks" placeholder="Marks" />
    <button onclick="updateResult()">Update Result</button>
  </div>

  <script>
    firebase.auth().onAuthStateChanged((user) => {
      if (!user) {
        // যদি কেউ লগইন না করে থাকে তাহলে index.html-এ পাঠানো হবে
        window.location.href = "index.html";
      }
    });

    function updateFee() {
      const uid = document.getElementById("targetUID").value;
      const month = document.getElementById("month").value;
      const amount = document.getElementById("amount").value;
      firebase.database().ref("students/" + uid + "/fees/" + month).set(amount);
      alert("Fee Updated");
    }

    function updateResult() {
      const uid = document.getElementById("targetUID").value;
      const subject = document.getElementById("subject").value;
      const marks = document.getElementById("marks").value;
      firebase.database().ref("students/" + uid + "/results/" + subject).set(marks);
      alert("Result Updated");
    }
  </script>
</body>
</html>
